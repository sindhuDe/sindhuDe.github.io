<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Narrative Visualisation</title>
<meta http-equiv="Content-Type" content="text/html; charset="utf-8"" />
<link rel="stylesheet" type="text/css" href="styles.css" />
  <!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
</head>
<body>
<!-- Begin Wrapper -->
<div id="wrapper">
  <!-- Begin Faux -->
  <div id="faux">
    <!-- Begin Left Column -->
    <div id="leftcolumn">
      <h3>Might a swift change in specific attributes contribute to higher CO2 emissions?</h3>
      <br>
      <h5>We'll now review the trends for India and China.</h5>
      <br>
       <p>Select an option from the dropdown menu.</p>
      <br>
    <!-- Initialize a select button -->
     <select id="selectButton"></select>

      <div class="left-subcolumn">
      <div id="my_dataviz"></div>
      <br>  <p><b>Select different values from the dropdown in the chart to examine historical trends for India and China. </b></p>
  </div>
    </div>

    <!-- End Left Column -->
    <!-- Begin Right Column -->
    <div id="rightcolumn">
<br>
<p>A closer analysis of India and China requires examining historical trends in population, employment rates, and inflation's impact on their economies.</p>
      <br>
       <p>The rapidly growing population in <strong> <em> India </em></strong> has led to considerable challenges in providing jobs for its citizens. This increase in the workforce has intensified the pressure on job creation, resulting in concerns about unemployment and social stability.</p><br>
       <br><p>Likewise, <strong> <em> China </em> </strong> has experienced employment challenges as it moves from an agrarian society to an industrial powerhouse, grappling with its large population.</p>
<br> <p>Inflation has also played a major role in shaping the economies of both India and China. With their rapid growth, these countries face inflationary pressures that impact purchasing power and economic stability. Policymakers must manage inflation carefully to sustain economic development and keep the cost of living in check.</p><br>
          </p><br><p>To achieve sustainable development and create a balanced future, it is essential to address both socio-economic factors and environmental concerns.</p><br>

<br>
<br>

           <p>Note: To simplify data loading for this project, we have sliced the data using the R library, as indicated on the slide.<sup>[1]</sup></p>

<ol style="margin:0 0 15px 0; padding:0; list-style-type:none;">
    <li style="margin-right:15px; display:inline;"><a href="https://databank.worldbank.org/source/world-development-indicators">Source of Data</a></li>
</ol>

<p style="font-size: 0.8em;"><sup>[1]</sup> Data sourced from <a href="https://databank.worldbank.org/source/world-development-indicators">World Development Indicators</a></p>
<p style="font-size: 0.8em;"> CS 416: Narrative Visualisation Project - Sindhuri Devathi </p>
<br>

        <a href="Scene2.html">
    <button class="next-button">Previous</button>
  </a>
        <a href="index.html">
    <button class="next-button">Restart</button>
  </a>

    </div>
    <!-- End Right Column -->
    <div class="clear"> </div>
  </div>
  <!-- End Faux -->
</div>
<!-- End Wrapper -->
</body>

<script>

// set the dimensions and margins of the graph
var margin = {top: 10, right: 20, bottom: 30, left: 80},
    width = 400 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

//Read the data
d3.csv("https://raw.githubusercontent.com/srnanda2/DataViz/main/IC_data.csv", function(data) {

    // List of groups (here I have one group per column)
    var allGroup = ["CO2emissions", "Inflation", "Unemployment","Population"]

    // add the options to the button
    d3.select("#selectButton")
      .selectAll('myOptions')
     	.data(allGroup)
      .enter()
    	.append('option')
      .text(function (d) { return d; }) // text showed in the menu
      .attr("value", function (d) { return d; }) // corresponding value returned by the button

    // A color scale: one color for each group
    var myColor = d3.scaleOrdinal()
      .domain("India", "China")
      .range([ "#D18975",
"#402D54" ]);

    // Add X axis --> it is a date format
    var x = d3.scaleLinear()
      .domain([2000,2019])
      .range([ 0, width ]);
    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x).tickFormat(d3.format("d"))
);

 // Initialize the Y axis
var y = d3.scaleLinear()
  .range([ height, 0]);
var yAxis = svg.append("g")
  .attr("class", "myYaxis")

    // A function that update the chart
    function update(selectedGroup) {
      var indiaGroup = "India_" + selectedGroup;
           var chinaGroup = "China_" + selectedGroup;
      // Create new data with the selection?

      var dataFilter = data.map(function(d) {
            return {
               Year: d.Year,
               [indiaGroup]: d[indiaGroup],
               [chinaGroup]: d[chinaGroup]
              };
             });
   svg.selectAll("path").remove();


  y.domain( [d3.min(dataFilter, function(d) { return Math.min(+d[indiaGroup], +d[chinaGroup]); }),d3.max(dataFilter, function(d) { return Math.max(+d[indiaGroup], +d[chinaGroup]); })
])
yAxis.transition().duration(1000).call(d3.axisLeft(y));


    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x).tickFormat(d3.format("d"))
);

    // Initialize line with group a
     svg
    //  .enter()
      .append("path")
       .datum(dataFilter)
         .transition()
         .duration(1000)
        .attr("d", d3.line()
       .x(function(d) { return x(+d.Year) })
            .y(function(d) { return y(+d[indiaGroup]) })
        )
        .attr("stroke", function(d){ return myColor("India") })
        .style("stroke-width", 4)
        .style("fill", "none")
     svg
      //      .enter()
       .datum(dataFilter)
      .append("path")
        .transition()
        .duration(1000)
        .attr("d", d3.line()
        .x(function(d) { return x(+d.Year) })
            .y(function(d) { return y(+d[chinaGroup]) })
        )
        .attr("stroke", function(d){ return myColor("China") })
        .style("stroke-width", 4)
        .style("fill", "none")


// Create a legend
var legend = svg.append("g")
  .attr("class", "legend")
  .attr("transform", "translate(" + (10) + "," + (margin.top + 10) + ")");

// Add legend elements
var legendRectSize = 18;
var legendSpacing = 6;

// Add legend for India
var indiaLegend = legend.append("g")
  .attr("class", "legend-item")
  .attr("transform", "translate(0, 0)");

indiaLegend.append("line")
  .attr("x1", 0)
  .attr("y1", legendRectSize / 2)
  .attr("x2", legendRectSize)
  .attr("y2", legendRectSize / 2)
  .attr("stroke", myColor("India"))
  .attr("stroke-width", 4)
  .attr("fill", "none");

indiaLegend.append("text")
  .attr("x", legendRectSize + legendSpacing)
  .attr("y", legendRectSize / 2)
  .attr("dy", "0.35em")
  .text("India");

// Add legend for China
var chinaLegend = legend.append("g")
  .attr("class", "legend-item")
  .attr("transform", "translate(0, " + (legendRectSize + legendSpacing) + ")");

chinaLegend.append("line")
  .attr("x1", 0)
  .attr("y1", legendRectSize / 2)
  .attr("x2", legendRectSize)
  .attr("y2", legendRectSize / 2)
  .attr("stroke", myColor("China"))
  .attr("stroke-width", 4)
  .attr("fill", "none");

chinaLegend.append("text")
  .attr("x", legendRectSize + legendSpacing)
  .attr("y", legendRectSize / 2)
  .attr("dy", "0.35em")
  .text("China");

    }




    // When the button is changed, run the updateChart function
    d3.select("#selectButton").on("change", function(d) {
        // recover the option that has been chosen
        var selectedOption = d3.select(this).property("value")
        // run the updateChart function with this selected option
        update(selectedOption)
    })
update('CO2emissions')
})


</script>


</html>
